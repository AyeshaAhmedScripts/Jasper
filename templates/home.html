{% extends "base.html" %}

{% block title %}Home - Zombie Survivor System{% endblock %}

{% block content %}
<h1>🧟 Zombie Survivor System 🧟‍♀️</h1>

<div style="margin-top: 20px;">
  <a href="/add-profile" class="button">➕ Add Profile</a>
  <a href="/all-profiles" class="button">📋 View All Profiles</a>
  <a href="/dashboard" class="button">📊 Dashboard</a>
  <a href="/search" class="button">🔍 Search & Filter</a>
</div>

<!-- 🗺️ Map Section -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
  #homepage-map-container {
    margin-top: 30px;
    width: 100%;
    height: 500px;
    position: relative;
    border: 2px solid #444;
    border-radius: 8px;
    overflow: hidden;
  }

  #homepage-map {
    width: 100%;
    height: 100%;
    z-index: 0;
  }

  .leaflet-control-zoom {
    top: 60px !important;
  }
</style>

<div id="homepage-map-container">
  <div id="homepage-map"></div>
</div>

<script>
  const homepageMap = L.map('homepage-map').setView([33.6844, 73.0479], 13);
  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    subdomains: 'abcd',
    maxZoom: 19
  }).addTo(homepageMap);

  // Try to show user location
  navigator.geolocation.getCurrentPosition(pos => {
    const latlng = [pos.coords.latitude, pos.coords.longitude];
    const icon = L.icon({
      iconUrl: "https://cdn-icons-png.flaticon.com/512/684/684908.png",
      iconSize: [25, 25]
    });
    L.marker(latlng, { icon }).addTo(homepageMap).bindPopup("📍 You are here").openPopup();
    homepageMap.setView(latlng, 15);
  });
</script>
{% endblock %}
